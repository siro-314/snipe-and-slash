# Snipe and Slash VRã‚²ãƒ¼ãƒ  - å¼•ãç¶™ããƒ•ã‚¡ã‚¤ãƒ«

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„ï¼ˆåˆ¤æ–­ã®è»¸ï¼‰
- **ç›®æ¨™**: 1268è¡Œã®å·¨å¤§main.jsã‚’TypeScriptåŒ–ã—ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ç§»è¡Œ
- **åˆ¤æ–­åŸºæº–**: ç–çµåˆã€æ‹¡å¼µæ€§ã€å …ç‰¢æ€§ã‚’é‡è¦–ã—ãŸã‚¯ãƒªãƒ¼ãƒ³ã‚³ãƒ¼ãƒ‰
- **å„ªå…ˆé †ä½**: 
  1. æ—¢å­˜æ©Ÿèƒ½ã®100%ä¿æŒï¼ˆå‹•ä½œä¿è¨¼ï¼‰
  2. æ®µéšçš„ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆæ€¥ãŒãªã„ï¼‰
  3. VRå®Ÿæ©Ÿç¢ºèªã¯Phase 5ã¾ã§å¾Œå›ã—

## 2. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒãƒƒãƒ—ã¨å½¹å‰²

```
snipe-and-slash/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ domain/              # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆPure Stateï¼‰
â”‚   â”‚   â”œâ”€â”€ gameState.ts     # âœ… GameStateManagerï¼ˆçŠ¶æ…‹ç®¡ç†ï¼‰
â”‚   â”‚   â””â”€â”€ types.ts         # âœ… å‹å®šç¾©
â”‚   â”œâ”€â”€ managers/            # ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼å±¤
â”‚   â”‚   â”œâ”€â”€ modelManager.ts  # âœ… ModelManagerï¼ˆGLTFãƒ­ãƒ¼ãƒ€ãƒ¼ï¼‰
â”‚   â”‚   â””â”€â”€ hudManager.ts    # âœ… HUDManagerï¼ˆUIæ›´æ–°ï¼‰
â”‚   â”œâ”€â”€ utils/               # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â””â”€â”€ helpers.ts       # âœ… ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
â”‚   â”œâ”€â”€ components/          # ğŸš§ A-Frameã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆPhase 4äºˆå®šï¼‰
â”‚   â”‚   â”œâ”€â”€ weapons/
â”‚   â”‚   â””â”€â”€ enemies/
â”‚   â””â”€â”€ main.ts              # âœ… Phase 3é€²è¡Œä¸­ï¼ˆ1265è¡Œâ†’æ®µéšçš„å‰Šæ¸›ï¼‰
â”œâ”€â”€ REFACTORING_PLAN.md      # âœ… å…¨ä½“è¨ˆç”»ï¼ˆPhase 0-7ï¼‰
â””â”€â”€ å¼•ãç¶™ã.md              # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## 3. æŠ€è¡“é¸å®šã¨åˆ¶ç´„

### TypeScriptç’°å¢ƒ
- **Vite**: é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆhttp://localhost:8080ï¼‰
- **ãƒ“ãƒ«ãƒ‰**: `npm run build` â†’ dist/ã«å‡ºåŠ›ï¼ˆmain-D9eHQSVS.js 22.99kBï¼‰
- **ç†ç”±**: é«˜é€ŸHMRã€A-Frame/Three.jså¯¾å¿œã€VRé–‹ç™ºå‘ã

### Phaseæˆ¦ç•¥ï¼ˆå…¨7ãƒ•ã‚§ãƒ¼ã‚ºï¼‰
- **Phase 0**: âœ… è¨ˆç”»æ›¸ä½œæˆå®Œäº†
- **Phase 1**: âœ… TypeScriptç’°å¢ƒæ§‹ç¯‰å®Œäº†
- **Phase 2**: âœ… ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²å®Œäº†ï¼ˆ468è¡Œã®æ–°è¦ã‚³ãƒ¼ãƒ‰ä½œæˆï¼‰
  - GameStateManager, ModelManager, HUDManager, Helpers
  - Gitã‚³ãƒŸãƒƒãƒˆ: `phase-2-complete`
- **Phase 3**: ğŸš§ **é€²è¡Œä¸­** - ã‚¯ãƒ©ã‚¹åŒ–ãƒ»ä¾å­˜æ€§æ³¨å…¥
  - âœ… Step 3.1-3.3: GameStateManagerçµ±åˆ
  - âœ… Step 3.4: HUDManagerçµ±åˆ
  - âœ… Step 3.5: Helpersçµ±åˆ
  - âœ… **Step 3.6å®Œäº†**: currentWeapon/activeHandç½®ãæ›ãˆ
  - ğŸš§ **æ¬¡ã®ã‚¿ã‚¹ã‚¯**: Step 3.7 ModelManagerçµ±åˆ

### åˆ¶ç´„äº‹é …
- **Three.jså¤šé‡ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**: Phase 4ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çµ±ä¸€äºˆå®š
- **A-Frameå‹å®šç¾©**: è¤‡é›‘ãªãŸã‚anyå‹ã§ä¸€æ—¦å›é¿
- **VRç¢ºèª**: Quest 2å®Ÿæ©Ÿã¯Phase 5ä»¥é™

## 4. ç¾çŠ¶ã¨æ¬¡ã®ä¸€æ‰‹

### âœ… Step 3.6å®Œäº†ï¼ˆcurrentWeapon/activeHandç½®ãæ›ãˆï¼‰
ä»¥ä¸‹ã®6ç®‡æ‰€ã‚’ç½®ãæ›ãˆå®Œäº†:
1. Line 1021: `GameState.currentWeapon = 'sword'` â†’ `gameState.setCurrentWeapon('sword')`
2. Line 1035: `GameState.currentWeapon = weaponType` â†’ `gameState.setCurrentWeapon(weaponType)`
3. Line 1047: `GameState.currentWeapon === 'sword'` â†’ `gameState.getCurrentWeapon() === 'sword'`
4. Line 1057: `GameState.currentWeapon === 'bow'` â†’ `gameState.getCurrentWeapon() === 'bow'`
5. Line 1073: `GameState.currentWeapon === 'bow'` â†’ `gameState.getCurrentWeapon() === 'bow'`
6. Line 1087: `GameState.currentWeapon === 'sword'` â†’ `gameState.getCurrentWeapon() === 'sword'`

**activeHand**: ä½¿ç”¨ç®‡æ‰€ãªã—ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰

**ãƒ“ãƒ«ãƒ‰**: âœ… æˆåŠŸï¼ˆdist/assets/main-D9eHQSVS.js 22.99kBï¼‰

### ğŸš§ Phase 3 æ®‹ã‚Šã‚¿ã‚¹ã‚¯

#### Step 3.7: ModelManagerçµ±åˆï¼ˆæ¬¡ã®ä½œæ¥­ï¼‰
**ç¾çŠ¶**: main.tsã«2ã¤ã®ModelManagerãŒå­˜åœ¨
- **äº’æ›æ€§ãƒ©ãƒƒãƒ‘ãƒ¼**: Line 52-81ï¼ˆconst ModelManagerï¼‰
- **å®Ÿè£…**: ç‹¬è‡ªå®Ÿè£…ãŒmain.tsã«ç›´æ¥åŸ‹ã‚è¾¼ã¾ã‚Œã¦ã„ã‚‹

**å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ï¼ˆæ¬¡ã®ã‚¿ãƒ¼ãƒ³ï¼‰**:
```bash
# 1. main.tsã®ModelManagerä½¿ç”¨ç®‡æ‰€ã‚’æ¤œç´¢
cd ~/Desktop/snipe-and-slash
grep -n "ModelManager\." src/main.ts

# 2. src/managers/modelManager.tsã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ç½®ãæ›ãˆ
# - ModelManager.load() â†’ modelManager.load()
# - ModelManager.getClone() â†’ modelManager.getClone()
# - ModelManager.init() â†’ modelManager.init()

# 3. äº’æ›æ€§ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’å‰Šé™¤ï¼ˆPhase 3æœ€å¾Œï¼‰

# 4. ãƒ“ãƒ«ãƒ‰ç¢ºèª
npm run build

# 5. Step 3.7å®Œäº†å¾Œã€Phase 3ã‚³ãƒŸãƒƒãƒˆ
git add -A
git commit -m "feat(phase3): ModelManagerçµ±åˆå®Œäº†"
git tag phase-3-complete
```

#### Step 3.8: ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°å‰Šé™¤ï¼ˆPhase 3æœ€çµ‚ã‚¹ãƒ†ãƒƒãƒ—ï¼‰
- äº’æ›æ€§ãƒ©ãƒƒãƒ‘ãƒ¼ï¼ˆGameState, ModelManagerï¼‰ã®å‰Šé™¤
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã®æ•´ç†
- æœ€çµ‚ãƒ“ãƒ«ãƒ‰ç¢ºèª

### Phase 4ä»¥é™ã®äºˆå®š
- **Phase 4**: A-Frameã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²ï¼ˆsword, enemy-mobile, enemy-turretãªã©ï¼‰
- **Phase 5**: VRå®Ÿæ©Ÿç¢ºèªãƒ»ãƒã‚°ä¿®æ­£
- **Phase 6**: æœ€é©åŒ–ãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- **Phase 7**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

---

**æ›´æ–°æ—¥æ™‚**: 2026-02-10 23:12
**GitçŠ¶æ…‹**: phase-2-completeï¼ˆPhase 3é€²è¡Œä¸­ï¼‰
**ãƒ“ãƒ«ãƒ‰**: âœ… æˆåŠŸï¼ˆ22.99kB gzipped 6.34kBï¼‰
**é–‹ç™ºã‚µãƒ¼ãƒãƒ¼**: http://localhost:8080
